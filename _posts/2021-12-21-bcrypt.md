---
layout: post
title: Flask-bcrypyt
categories: flask 
---

### 💡 ***비밀번호 안전하게 저장하기***

암호를 있는 그대로 DB에 저장하면 보안상 문제가 생긴다.

그래서 오늘은 <span style="color:#2E8B57">***Flask-bcrpyt***</span>를 사용해봤다.

```python
# __init__.py

from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from flask_migrate import Migrate
import config
from flask_bcrypt import Bcrypt

db = SQLAlchemy()
migrate = Migrate()
bcrypt = Bcrypt()

def create_app():
    app = Flask(__name__)
    app.config.from_object(config)
    
    # ORM
    db.init_app(app)
    migrate.init_app(app, db)

    #bcrypt
    bcrypt.init_app(app)

    # Blueprint(생략)

    # Model(생략)
    return app
```
```python
from flask import Blueprint, render_template, url_for, flash, session, request, g
from werkzeug.utils import redirect
from todo.models import User
from todo import db, bcrypt
from todo.forms import UserCreationForm, UserLoginForm

bp = Blueprint('auth', __name__, url_prefix='/auth')

@bp.route('/signup/', methods=["GET","POST"])
def signup():
    form = UserCreationForm()
    if request.method == 'POST' and form.validate_on_submit():
        user = User.query.filter_by(username=form.username.data).first()
        if not user:
            user = User(
                username = form.username.data,
                password =  bcrypt.generate_password_hash(form.password1.data),
                email = form.email.data
            )
            print(user.password)
            db.session.add(user)
            db.session.commit()
            return redirect(url_for('main.index'))
        else:
            flash("이미 있는 사용자")
    else:
        form = UserCreationForm()
    return render_template('signup/main_signup.html', form=form)
```
bcrypt.check_password_hash(b_password, 'password') 와 같이 암호를 확인할 수 있다.

---
